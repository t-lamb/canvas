
<html>
<head>
	<title>CUR$0R P4R7Y</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href='https://fonts.googleapis.com/css?family=Cutive+Mono' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var socket = io.connect('http://192.168.1.94:8081');

		socket.on('connect', function(){
			console.log("Connected on port 8081.")
		});

		//receive from any event
		socket.on('otherMouseMoved', function(data){
			console.log(data.x + ", " + data.y + ", " + data.i);
			odraw(data.x, data.y, data.i);
		});

		//send my mouse info
		function sendmouse(xval, yval) {
			//console.log("sendmouse: " + xval + ", " + yval + ", " + myIndex);
			socket.emit('clientMouseMove', { x: xval, y: yval, i: myIndex });
		};

		var canvas;
		var context;

		var imgArray = new Array;
		imgArray[0] = new Image();
		imgArray[0].src = "images/cactus.png";

		imgArray[1] = new Image();
		imgArray[1].src = "images/calc.png";

		imgArray[2] = new Image();
		imgArray[2].src = "images/cards.png";

		imgArray[3] = new Image();
		imgArray[3].src = "images/char.png";

		imgArray[4] = new Image();
		imgArray[4].src = "images/disk.png";

		imgArray[5] = new Image();
		imgArray[5].src = "images/err.png";

		imgArray[6] = new Image();
		imgArray[6].src = "images/fax.png";

		imgArray[7] = new Image();
		imgArray[7].src = "images/folder.png";

		imgArray[8] = new Image();
		imgArray[8].src = "images/girl.png";

		imgArray[9] = new Image();
		imgArray[9].src = "images/horse.png";

		imgArray[10] = new Image();
		imgArray[10].src = "images/kiss.png";

		imgArray[11] = new Image();
		imgArray[11].src = "images/mac.png";

		imgArray[12] = new Image();
		imgArray[12].src = "images/palm.png";

		imgArray[13] = new Image();
		imgArray[13].src = "images/penguin.png";

		imgArray[14] = new Image();
		imgArray[14].src = "images/satelite.png";

		imgArray[15] = new Image();
		imgArray[15].src = "images/shark.png";

		imgArray[16] = new Image();
		imgArray[16].src = "images/tv.png";

		imgArray[17] = new Image();
		imgArray[17].src = "images/window.png";

		function newIndex(arrLength) {
			var randIndex = Math.floor(arrLength * Math.random());
			return randIndex;
		};
		var myIndex = newIndex(imgArray.length);
		var myCursor = imgArray[myIndex];

		function initcanvas() {
			canvas = document.getElementById('mycanvas');
			context = canvas.getContext('2d');
			
			context.canvas.width = window.innerWidth;
			context.canvas.height = window.innerHeight;
			context.fillStyle = "rgba(0, 0, 200, 0)";
			context.fillRect(0,0,canvas.width,canvas.height);

			canvas.addEventListener('mousemove', function (e){
				//console.log("mousemove " + e.clientX + ", " + e.clientY);

				x = e.clientX;
				y = e.clientY;

				//console.log("mousemove x:" + x + " y:" + y);

				sendmouse(x,y);
				draw(x,y);
			}, false);

			canvas.addEventListener('click', function(){
				myIndex = newIndex(imgArray.length);
				myCursor = imgArray[myIndex];

			});
		};

		function draw(xval, yval) {
			//console.log("draw " + xval + " " + yval);
        	context.drawImage(myCursor, xval, yval);

		};

		function odraw(xval, yval, i){
			var oCursor = imgArray[i];
			context.drawImage(oCursor, xval, yval);
		
		};

	</script>
</head>
<body onload="initcanvas();">
	<header>
		<h1>Cursor Party!</h1>
	</header>
	<div class="main">
		<canvas id="mycanvas" />
	</div>
	<footer></footer>
</body>
</html>
