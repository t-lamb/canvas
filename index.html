
<html>
<head>
	<title>CUR50R P4R7Y</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href='https://fonts.googleapis.com/css?family=Cutive+Mono' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var socket = io.connect('http://192.168.1.94:8081');

		socket.on('connect', function(){
			console.log("Connected on port 8081.")
		});

		//receive from any event
		socket.on('othermouse', function(data){
			console.log(data.x + ", " + data.y + ", " + data.i);
			odraw(data.x, data.y, data.i);
		});

		//
		function sendmouse(xval, yval) {
			//console.log("sendmouse: " + xval + ", " + yval + ", " + randIndex);
			socket.emit('othermouse', { x: xval, y: yval, i: randIndex});
		};

		var canvas;
		var context;

		var imgArray = new Array;
		imgArray[0] = new Image();
		imgArray[0].src = "images/girl.png";

		imgArray[1] = new Image();
		imgArray[1].src = "images/err.png";

		imgArray[2] = new Image();
		imgArray[2].src = "images/cards.png";

		imgArray[3] = new Image();
		imgArray[3].src = "images/calc.png";

		imgArray[4] = new Image();
		imgArray[4].src = "images/disk.png";

		imgArray[5] = new Image();
		imgArray[5].src = "images/cactus.png";

		imgArray[6] = new Image();
		imgArray[6].src = "images/kiss.png";

		var randIndex = Math.floor(imgArray.length * Math.random());
		var myCursor = imgArray[randIndex];
		

		function initcanvas() {
			canvas = document.getElementById('mycanvas');
			context = canvas.getContext('2d');
			
			context.canvas.width = window.innerWidth;
			context.canvas.height = window.innerHeight;
			context.fillStyle = "#FFFFFF";
			context.fillRect(0,0,canvas.width,canvas.height);

			canvas.addEventListener('mousemove', function (e){
				//console.log("mousemove " + e.clientX + ", " + e.clientY);

				x = e.clientX;
				y = e.clientY;

				//console.log("mousemove x:" + x + " y:" + y);

				sendmouse(x,y);
				draw(x,y);
			}, false);
		};

		function draw(xval, yval) {
			//console.log("draw " + xval + " " + yval);
        	context.drawImage(myCursor, xval, yval);

		};

		function odraw(xval, yval, i){
			var oCursor = imgArray[i];
			context.drawImage(oCursor, xval, yval);
		
		};

	</script>
</head>
<body onload="initcanvas();">
	<header>
		cursor party!
	</header>
	<canvas id="mycanvas" />
</body>
</html>
